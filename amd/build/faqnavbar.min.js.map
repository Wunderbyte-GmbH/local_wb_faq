{"version":3,"file":"faqnavbar.min.js","sources":["../src/faqnavbar.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n//\n// import {get_string as getString} from \"core/str\";\n\nimport Ajax from \"core/ajax\";\nimport Templates from \"core/templates\";\nimport MyModal from 'local_wb_faq/custommodal';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\n\n/**\n * Gets called from mustache template.\n *\n */\nexport function init() {\n\n  // eslint-disable-next-line no-console\n  console.log('init navbar called');\n\n  addEvents();\n}\n\n/**\n * Adds Evente to menu button\n */\nfunction addEvents() {\n  let button = document.querySelector(\"[data-id='wb-faq-navbar-open-modal']\");\n\n  if (!button) {\n\n    // eslint-disable-next-line no-console\n    console.log('couldnt find button');\n\n    return;\n  }\n\n  if (button.initialized) {\n    return;\n  }\n\n  button.initialized = true;\n\n  // eslint-disable-next-line no-console\n  console.log('found button', button);\n\n  button.addEventListener('click', async e => {\n\n    // eslint-disable-next-line no-console\n    console.log('found e', e);\n\n    let data = {\n      tabs: [\n        {\n            \"name\": \"x\",\n            \"active\": true,\n            \"success\": true\n        },\n        {\n          \"name\": \"y\",\n          \"active\": false,\n          \"success\": false\n        }\n      ],\n      body: {\n        text: 'my js text',\n      }\n    };\n\n    Ajax.call([\n      {\n        methodname: \"local_wb_faq_get_faq_data\",\n        args: {},\n        done: async function (faqdata) {\n\n          data.json = faqdata.json;\n          data.root = faqdata.root;\n          data.uid = faqdata.uid;\n          data.canedit = false;\n          data.allowedit = false;\n\n          const modal = await ModalFactory.create({\n            type: MyModal.TYPE,\n            large: true,\n            body: Templates.render('local_wb_faq/navbar/body', data),\n          }).then(modal => {\n            modal.setRemoveOnClose(true);\n            return modal;\n          }).catch(e => {\n            // eslint-disable-next-line no-console\n            console.error(e);\n          });\n\n          modal.show();\n\n\n\n          modal.getRoot().on(ModalEvents.hidden, (e) => {\n            // eslint-disable-next-line no-console\n            console.log('modal dismissed', e);\n            modal.close();\n          });\n\n          modal.getRoot().on(ModalEvents.destroyed, (e) => {\n            // eslint-disable-next-line no-console\n            console.log('modal destroyed', e);\n          });\n        },\n        fail: function (ex) {\n          // eslint-disable-next-line no-console\n          console.log(ex);\n        },\n      },\n    ]);\n  });\n}"],"names":["console","log","button","document","querySelector","initialized","addEventListener","async","e","data","tabs","body","text","call","methodname","args","done","faqdata","json","root","uid","canedit","allowedit","modal","ModalFactory","create","type","MyModal","TYPE","large","Templates","render","then","setRemoveOnClose","catch","error","show","getRoot","on","ModalEvents","hidden","close","destroyed","fail","ex","addEvents"],"mappings":";;;;;sFAqCEA,QAAQC,IAAI,qCASRC,OAASC,SAASC,cAAc,4CAE/BF,mBAGHF,QAAQC,IAAI,0BAKVC,OAAOG,mBAIXH,OAAOG,aAAc,EAGrBL,QAAQC,IAAI,eAAgBC,QAE5BA,OAAOI,iBAAiB,SAASC,MAAAA,IAG/BP,QAAQC,IAAI,UAAWO,OAEnBC,KAAO,CACTC,KAAM,CACJ,MACY,YACE,WACC,GAEf,MACU,YACE,WACC,IAGfC,KAAM,CACJC,KAAM,6BAILC,KAAK,CACR,CACEC,WAAY,4BACZC,KAAM,GACNC,KAAMT,eAAgBU,SAEpBR,KAAKS,KAAOD,QAAQC,KACpBT,KAAKU,KAAOF,QAAQE,KACpBV,KAAKW,IAAMH,QAAQG,IACnBX,KAAKY,SAAU,EACfZ,KAAKa,WAAY,QAEXC,YAAcC,uBAAaC,OAAO,CACtCC,KAAMC,qBAAQC,KACdC,OAAO,EACPlB,KAAMmB,mBAAUC,OAAO,2BAA4BtB,QAClDuB,MAAKT,QACNA,MAAMU,kBAAiB,GAChBV,SACNW,OAAM1B,IAEPR,QAAQmC,MAAM3B,MAGhBe,MAAMa,OAINb,MAAMc,UAAUC,GAAGC,sBAAYC,QAAShC,IAEtCR,QAAQC,IAAI,kBAAmBO,GAC/Be,MAAMkB,WAGRlB,MAAMc,UAAUC,GAAGC,sBAAYG,WAAYlC,IAEzCR,QAAQC,IAAI,kBAAmBO,OAGnCmC,KAAM,SAAUC,IAEd5C,QAAQC,IAAI2C,WA1FpBC"}