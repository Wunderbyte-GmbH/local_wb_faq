define("local_wb_faq/admin",["exports","core/ajax","core/templates","core_form/dynamicform","local_wb_faq/edit"],(function(_exports,_ajax,_templates,_dynamicform,_edit){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_wunderbyte_table
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.deleteEntry=function(id){_ajax.default.call([{methodname:"local_wb_faq_delete_entry",args:{id:id},done:function(result){console.log("deleted",result,id)}}])},_exports.init=void 0,_exports.toggleVisibility=function(id){_ajax.default.call([{methodname:"local_wb_faq_toggle_entry_visibility",args:{id:id},done:function(result){console.log("toggled",result,id)}}])},_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_dynamicform=_interopRequireDefault(_dynamicform);_exports.init=data=>{var json;!function(data){document.getElementById("local_wb_faq_admin").addEventListener("click",(e=>{e.target.hasAttribute("data-action")&&(e.target.setAttribute("disabled","disabled"),"goto"==e.target.dataset.action&&function(id,data){let json=data[id],container=document.getElementById("local_wb_faq_admincontent");_templates.default.renderForPromise("local_wb_faq/admincontent",json).then((_ref=>{let{html:html}=_ref;container.insertAdjacentHTML("beforeend",html)})).catch((e=>{console.log(e)}))}(e.target.dataset.targetid,data),"quickedit"==e.target.dataset.action&&function(id,type){console.log("renderedit",id,type);let json={id:type+"-"+id},container=document.querySelector("#local_wb_faq_admin .view-"+type+"-"+id),editrow="#local_wb_faq_admin .edit-"+type+"-"+id,td="#local_wb_faq_admin .edit-"+type+"-"+id+" td",hidden="hidden";0==id&&(editrow="#local_wb_faq_admin #local_wb_faq_new_entry form",container=document.querySelector("#local_wb_faq_new_entry"),td="#local_wb_faq_admin #local_wb_faq_new_entry",hidden="addnew");_templates.default.renderForPromise("local_wb_faq/quickedit",json).then((_ref2=>{let{html:html}=_ref2;container.insertAdjacentHTML("afterend",html),container.classList.add(hidden)})).then((()=>{let dynamicForm=null;return dynamicForm=1==type?new _dynamicform.default(document.querySelector(td),"local_wb_faq\\form\\editQuestionForm"):new _dynamicform.default(document.querySelector(td),"local_wb_faq\\form\\editCategoriesForm"),dynamicForm.load({id:id,type:type}),dynamicForm})).then((dynamicForm=>{dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED,(e=>{e.preventDefault(),container.classList.remove(hidden),document.querySelector(editrow).remove(),window.location.reload()})),dynamicForm.addEventListener(dynamicForm.events.FORM_CANCELLED,(e=>{e.preventDefault(),container.classList.remove(hidden),document.querySelector(editrow).remove()}))})).catch((e=>{console.log(e)}))}(e.target.dataset.targetid,e.target.dataset.type),"delete"==e.target.dataset.action&&(console.log("we want to delete",e.target.dataset.targetid),(0,_edit.confirmDeleteEntry)(e)),e.target.removeAttribute("disabled"))}))}(data),json=data,_templates.default.renderForPromise("local_wb_faq/quickedit",json[1])}}));

//# sourceMappingURL=admin.min.js.map