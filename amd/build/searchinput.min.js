define ("local_wb_faq/searchinput",["exports","core/templates","core/str"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.render=a.init=a.searchJSON=a.searchInput=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var d=[];a.searchInput=function searchInput(b,c,d,e){console.log("searchinput uid: ",e);var f,g,h,j,k,l;f=document.querySelector(b);g=f.value.toUpperCase();h=document.querySelectorAll(c);for(k=0;k<h.length;k++){j=h[k].querySelector(d);l=j.textContent||j.innerText;if(-1<l.toUpperCase().indexOf(g)){h[k].style.display=""}else{h[k].style.display="none"}}};var e=function(a,b,e){var g=[];console.log(a,b);var h=document.querySelector(a),j=document.querySelector(b).value.toUpperCase();console.log(j);if(3<j.length){var k=0;Object.values(e).forEach(function(a){if(a.content&&-1<a.content.toUpperCase().indexOf(j)||a.title&&-1<a.title.toUpperCase().indexOf(j)){g[k]=a;if(0==a.type){g[k].iscategory=!0}k++}});for(var i=0;i<g.length;i++){if("undefined"==typeof d[i]){f(g,h);break}if(g[i].id!=d[i].id){f(g,h);break}}d=g;if(1>d.length){(0,c.get_string)("noresult","local_wb_faq").then(function(a){console.log(a);h.innerHTML=a}).catch(function(a){console.log(a)})}}else if(0==j.length){h.innerHTML="";d=[]}else{(0,c.get_string)("stringtooshort","local_wb_faq").then(function(a){console.log(a);h.innerHTML=a}).catch(function(a){console.log(a)});d=[]}};a.searchJSON=e;a.init=function init(a,b){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null;console.log("initSearch",a,b);document.querySelector(a).addEventListener("keyup",function(){e(b,a,c)})};var f=function(a,c){console.log(c);b.default.renderForPromise("local_wb_faq/searchbox",a).then(function(a){var b=a.html;c.innerHTML="";c.insertAdjacentHTML("afterbegin",b)}).catch(function(a){console.log(a)})};a.render=f});
//# sourceMappingURL=searchinput.min.js.map
