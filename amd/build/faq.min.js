define("local_wb_faq/faq",["exports","core/templates","core/str"],(function(_exports,_templates,_str){var obj;
/*
   * @package    local_wunderbyte_table
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};var clicks=0;function render(id,data,uid){let json=JSON.parse(data),templatedata=json[id];templatedata.root=id,console.log(templatedata),templatedata&&templatedata.hasOwnProperty("parentid")&&(json[templatedata.parentid].title&&(templatedata.parenttitle=json[templatedata.parentid].title),""==templatedata.parentid&&(templatedata.parenttitle=(0,_str.get_string)("faq","local_wb_faq")),document.querySelector(".local_wb_faq-"+uid).innerHTML="",_templates.default.renderForPromise("local_wb_faq/faq",templatedata).then((_ref=>{let{html:html,js:js}=_ref;html='<div class="local_wb_faq-'+uid+'">'+html+"</div>",_templates.default.replaceNode(".local_wb_faq-"+uid,html,js)})).catch((e=>{console.log(e)})))}_exports.init=(data,root,uid)=>{clicks=0,console.log("faq.js ",uid),render(root,data,uid),function(data,root,uid){let select=document.querySelector(".local_wb_faq_container-"+uid);select&&select.addEventListener("click",(e=>{let button=e.target;console.log(e.target),"faqcollapse"==button.dataset.toggle&&(clicks++,console.log(clicks),button.classList.contains("collapsed")?(button.classList.remove("collapsed"),document.querySelector(button.dataset.target).classList.add("show"),document.querySelector(button.dataset.target).classList.remove("hide")):(button.classList.add("collapsed"),document.querySelector(button.dataset.target).classList.add("hide"),document.querySelector(button.dataset.target).classList.remove("show"))),"goto"==e.target.dataset.action&&render(e.target.dataset.targetid,data,uid)}));let searchbox=document.querySelector(".wb_faq_searchbox-"+uid);console.log("searchbox",searchbox),searchbox&&searchbox.addEventListener("click",(e=>{let button=e.target;"faqcollapse"==button.dataset.toggle&&(clicks++,button.classList.contains("collapsed")?(button.classList.remove("collapsed"),document.querySelector(button.dataset.target).classList.add("show"),document.querySelector(button.dataset.target).classList.remove("hide")):(button.classList.add("collapsed"),document.querySelector(button.dataset.target).classList.add("hide"),document.querySelector(button.dataset.target).classList.remove("show"))),"goto"==e.target.dataset.action&&(render(e.target.dataset.targetid,data,uid),document.querySelector(".local_wb_faq-"+uid).scrollIntoView({block:"start",behavior:"smooth"}))}));let category=document.querySelector("#id_categorypicker");category&&category.addEventListener("change",(()=>{let faqid=category.value;""==category.value&&(faqid=root),render(faqid,data)}))}(data,root,uid)}}));

//# sourceMappingURL=faq.min.js.map