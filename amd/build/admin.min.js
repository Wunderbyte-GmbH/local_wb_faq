define("local_wb_faq/admin",["exports","core/ajax","core/templates","core_form/dynamicform"],(function(_exports,_ajax,_templates,_dynamicform){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_wunderbyte_table
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.deleteentry=void 0,_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_dynamicform=_interopRequireDefault(_dynamicform);_exports.init=(data,startid)=>{var json;console.log(data),console.log(startid),function(data){document.getElementById("local_wb_faq_admin").addEventListener("click",(e=>{e.target.hasAttribute("data-action")&&(e.target.setAttribute("disabled","disabled"),"goto"==e.target.dataset.action&&(console.log("goto"),function(id,data){let json=data[id],container=document.getElementById("local_wb_faq_admincontent");_templates.default.renderForPromise("local_wb_faq/admincontent",json).then((_ref=>{let{html:html}=_ref;container.insertAdjacentHTML("beforeend",html)}))}(e.target.dataset.targetid,data)),"quickedit"==e.target.dataset.action&&(console.log("quickedit"),function(id,type,data){let json={id:type+"-"+id},container=document.querySelector("#local_wb_faq_admin .view-"+type+"-"+id),editrow="#local_wb_faq_admin .edit-"+type+"-"+id,td="#local_wb_faq_admin .edit-"+type+"-"+id+" td",hidden="hidden";0==id&&(console.log("id 0"),editrow="#local_wb_faq_admin #local_wb_faq_new_entry form",container=document.querySelector("#local_wb_faq_new_entry"),td="#local_wb_faq_admin #local_wb_faq_new_entry",type="edit",hidden="addnew");_templates.default.renderForPromise("local_wb_faq/quickedit",json).then((_ref2=>{let{html:html}=_ref2;container.insertAdjacentHTML("afterend",html),container.classList.add(hidden)})).then((()=>{let dynamicForm=new _dynamicform.default(document.querySelector(td),"local_wb_faq\\form\\dynamiceditform");return dynamicForm.load({id:id}),console.log("dynamis"),dynamicForm})).then((dynamicForm=>{dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED,(e=>{e.preventDefault();const response=e.detail;container.classList.remove(hidden),console.log(response),document.querySelector(editrow).remove(),console.log("refresh"),window.location.reload()})),dynamicForm.addEventListener(dynamicForm.events.FORM_CANCELLED,(e=>{e.preventDefault(),container.classList.remove(hidden),document.querySelector(editrow).remove()}))}))}(e.target.dataset.targetid,e.target.dataset.type)),"delete"==e.target.dataset.action&&(e.target.closest("tr").remove(),deleteentry(e.target.dataset.targetid)),e.target.removeAttribute("disabled"))}))}(data),json=data,_templates.default.renderForPromise("local_wb_faq/quickedit",json[1]).then((_ref3=>{let{html:html}=_ref3;html=""}))};const deleteentry=id=>{console.log("delete"+id),_ajax.default.call([{methodname:"local_wb_faq_delete_entry",args:{id:id},done:function(){console.log("")}}])};_exports.deleteentry=deleteentry}));

//# sourceMappingURL=admin.min.js.map