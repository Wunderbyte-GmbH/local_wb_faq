define ("local_wb_faq/admin",["exports","core/ajax","core/templates","core_form/dynamicform"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.deleteentry=a.init=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}a.init=function init(a){f(a);i(a)};function f(a){var b=document.getElementById("local_wb_faq_admin");b.addEventListener("click",function(b){if(b.target.hasAttribute("data-action")){b.target.setAttribute("disabled","disabled");if("goto"==b.target.dataset.action){g(b.target.dataset.targetid,a)}if("quickedit"==b.target.dataset.action){h(b.target.dataset.targetid,b.target.dataset.type,a)}if("delete"==b.target.dataset.action){b.target.closest("tr").remove();j(b.target.dataset.targetid)}b.target.removeAttribute("disabled")}})}function g(a,b){var d=b[a],e=document.getElementById("local_wb_faq_admincontent");c.default.renderForPromise("local_wb_faq/admincontent",d).then(function(a){var b=a.html;e.insertAdjacentHTML("beforeend",b)}).catch(function(a){console.log(a)})}var j=function(a){b.default.call([{methodname:"local_wb_faq_delete_entry",args:{id:a},done:function done(){}}])};a.deleteentry=j;function h(a,b){var f=document.querySelector("#local_wb_faq_admin .view-"+b+"-"+a),g="#local_wb_faq_admin .edit-"+b+"-"+a,h="#local_wb_faq_admin .edit-"+b+"-"+a+" td",i="hidden";if(0==a){g="#local_wb_faq_admin #local_wb_faq_new_entry form";f=document.querySelector("#local_wb_faq_new_entry");h="#local_wb_faq_admin #local_wb_faq_new_entry";i="addnew"}c.default.renderForPromise("local_wb_faq/quickedit",{id:b+"-"+a}).then(function(a){var b=a.html;f.insertAdjacentHTML("afterend",b);f.classList.add(i)}).then(function(){var c=new d.default(document.querySelector(h),"local_wb_faq\\form\\dynamiceditform");c.load({id:a,type:b});return c}).then(function(a){a.addEventListener(a.events.FORM_SUBMITTED,function(a){a.preventDefault();f.classList.remove(i);document.querySelector(g).remove();window.location.reload()});a.addEventListener(a.events.FORM_CANCELLED,function(a){a.preventDefault();f.classList.remove(i);document.querySelector(g).remove()})})}function i(a){c.default.renderForPromise("local_wb_faq/quickedit",a[1])}});
//# sourceMappingURL=admin.min.js.map
