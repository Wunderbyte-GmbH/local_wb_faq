{"version":3,"sources":["../src/searchinput.js"],"names":["searcharray","searchInput","listContainer","elementToHide","elementToSearch","input","filter","li","a","i","txtValue","document","querySelector","value","toUpperCase","querySelectorAll","length","textContent","innerText","indexOf","style","display","searchJSON","json","arr","container","getElementById","searchVal","console","log","Object","values","forEach","e","content","title","type","iscategory","render","id","then","innerHTML","catch","init","searchInputID","addEventListener","data","Templates","renderForPromise","html","insertAdjacentHTML"],"mappings":"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","sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Templates from 'core/templates';\nimport {get_string as getString} from 'core/str';\n\nvar searcharray = [];\n\nexport const searchInput = (listContainer, elementToHide, elementToSearch) => {\n    let input, filter, li, a, i, txtValue;\n    input = document.querySelector(listContainer);\n    filter = input.value.toUpperCase();\n    li = document.querySelectorAll(elementToHide);\n    for (i = 0; i < li.length; i++) {\n        a = li[i].querySelector(elementToSearch);\n        txtValue = a.textContent || a.innerText;\n\n        if (txtValue.toUpperCase().indexOf(filter) > -1) {\n            li[i].style.display = \"\";\n        } else {\n            li[i].style.display = \"none\";\n        }\n    }\n};\n\nexport const searchJSON = (listContainer, json) => {\n    let arr = [];\n    // Select Container\n    let container = document.getElementById('wb_faq_searchbox');\n\n    let searchVal = document.querySelector(listContainer).value.toUpperCase();\n\n    // eslint-disable-next-line no-console\n    console.log(searchVal);\n    if (searchVal.length > 3) {\n        let i = 0;\n        Object.values(json).forEach(e=>{\n             if ((e.content && e.content.toUpperCase().indexOf(searchVal) > -1)\n                || (e.title && e.title.toUpperCase().indexOf(searchVal) > -1)) {\n                arr[i] = e;\n                if (e.type == 0) {\n                    arr[i].iscategory = true;\n                }\n                i++;\n            }\n        });\n\n        for (let i = 0; i < arr.length; i++) {\n\n            if (typeof searcharray[i] === 'undefined') {\n                render(arr, container);\n                break;\n            }\n\n            if (arr[i].id != searcharray[i].id) {\n\n                render(arr, container);\n                break;\n            }\n        }\n        searcharray = arr;\n\n        if (searcharray.length < 1) {\n            getString('noresult', 'local_wb_faq').then(value => {\n\n                // eslint-disable-next-line no-console\n                console.log(value);\n                container.innerHTML = value;\n                return;\n            }).catch(e => {\n                // eslint-disable-next-line no-console\n                console.log(e);\n            });\n        }\n\n    } else if (searchVal.length == 0) {\n\n        container.innerHTML = '';\n        searcharray = [];\n\n    } else {\n\n        getString('stringtooshort', 'local_wb_faq').then(value => {\n\n            // eslint-disable-next-line no-console\n            console.log(value);\n            container.innerHTML = value;\n            return;\n        }).catch(e => {\n            // eslint-disable-next-line no-console\n            console.log(e);\n        });\n\n        searcharray = [];\n\n    }\n};\n\nexport const init = (searchInputID, listContainer, elementToHide, elementToSearch, json = null) => {\n\n    document.getElementById(searchInputID).addEventListener('keyup', function () {\n        searchJSON(listContainer, json);\n    });\n};\n\n\nexport const render = (data, container) => {\n    // Render\n    // eslint-disable-next-line no-console\n    console.log(data, container);\n\n    Templates.renderForPromise('local_wb_faq/searchbox', data).then(({html}) => {\n        container.innerHTML = \"\";\n        container.insertAdjacentHTML('afterbegin', html);\n        return;\n    }).catch(e => {\n        // eslint-disable-next-line no-console\n        console.log(e);\n    });\n};"],"file":"searchinput.min.js"}