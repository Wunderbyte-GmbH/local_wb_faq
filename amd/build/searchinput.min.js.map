{"version":3,"sources":["../src/searchinput.js"],"names":["searcharray","searchInput","inputClass","elementToHide","elementToSearch","uid","console","log","input","filter","li","a","i","txtValue","document","querySelector","value","toUpperCase","querySelectorAll","length","textContent","innerText","indexOf","style","display","searchJSON","listContainer","json","arr","container","searchVal","Object","values","forEach","e","content","title","type","iscategory","render","id","then","innerHTML","catch","init","searchInputID","addEventListener","data","Templates","renderForPromise","html","insertAdjacentHTML"],"mappings":"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","sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Templates from 'core/templates';\nimport {get_string as getString} from 'core/str';\n\nvar searcharray = [];\n\nexport const searchInput = (inputClass, elementToHide, elementToSearch, uid) => {\n\n    // eslint-disable-next-line no-console\n    console.log('searchinput uid: ', uid);\n\n    let input, filter, li, a, i, txtValue;\n    input = document.querySelector(inputClass);\n    filter = input.value.toUpperCase();\n    li = document.querySelectorAll(elementToHide);\n    for (i = 0; i < li.length; i++) {\n        a = li[i].querySelector(elementToSearch);\n        txtValue = a.textContent || a.innerText;\n\n        if (txtValue.toUpperCase().indexOf(filter) > -1) {\n            li[i].style.display = \"\";\n        } else {\n            li[i].style.display = \"none\";\n        }\n    }\n};\n\nexport const searchJSON = (listContainer, inputClass, json) => {\n    let arr = [];\n    // Select Container\n    // eslint-disable-next-line no-console\n    console.log(listContainer, inputClass);\n    let container = document.querySelector(listContainer);\n\n    let searchVal = document.querySelector(inputClass).value.toUpperCase();\n\n    // eslint-disable-next-line no-console\n    console.log(searchVal);\n    if (searchVal.length > 3) {\n        let i = 0;\n        Object.values(json).forEach(e=>{\n             if ((e.content && e.content.toUpperCase().indexOf(searchVal) > -1)\n                || (e.title && e.title.toUpperCase().indexOf(searchVal) > -1)) {\n                arr[i] = e;\n                if (e.type == 0) {\n                    arr[i].iscategory = true;\n                }\n                i++;\n            }\n        });\n\n        for (let i = 0; i < arr.length; i++) {\n\n            if (typeof searcharray[i] === 'undefined') {\n                render(arr, container);\n                break;\n            }\n\n            if (arr[i].id != searcharray[i].id) {\n\n                render(arr, container);\n                break;\n            }\n        }\n        searcharray = arr;\n\n        if (searcharray.length < 1) {\n            getString('noresult', 'local_wb_faq').then(value => {\n\n                // eslint-disable-next-line no-console\n                console.log(value);\n                container.innerHTML = value;\n                return;\n            }).catch(e => {\n                // eslint-disable-next-line no-console\n                console.log(e);\n            });\n        }\n\n    } else if (searchVal.length == 0) {\n\n        container.innerHTML = '';\n        searcharray = [];\n\n    } else {\n\n        getString('stringtooshort', 'local_wb_faq').then(value => {\n\n            // eslint-disable-next-line no-console\n            console.log(value);\n            container.innerHTML = value;\n            return;\n        }).catch(e => {\n            // eslint-disable-next-line no-console\n            console.log(e);\n        });\n\n        searcharray = [];\n\n    }\n};\n\nexport const init = (searchInputID, listContainer, elementToHide, elementToSearch, json = null) => {\n    // eslint-disable-next-line no-console\n    console.log(\"initSearch\", searchInputID, listContainer);\n    document.querySelector(searchInputID).addEventListener('keyup', function () {\n        searchJSON(listContainer, searchInputID, json);\n    });\n};\n\n\nexport const render = (data, container) => {\n    // Render\n    // eslint-disable-next-line no-console\n    console.log(container);\n\n    Templates.renderForPromise('local_wb_faq/searchbox', data).then(({html}) => {\n        container.innerHTML = \"\";\n        container.insertAdjacentHTML('afterbegin', html);\n        return;\n    }).catch(e => {\n        // eslint-disable-next-line no-console\n        console.log(e);\n    });\n};"],"file":"searchinput.min.js"}