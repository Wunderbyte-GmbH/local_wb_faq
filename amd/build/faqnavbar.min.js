define("local_wb_faq/faqnavbar",["exports","core/str","core/ajax","core/templates","local_wb_faq/custommodal","core/modal_factory"],(function(_exports,_str,_ajax,_templates,_custommodal,_modal_factory){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_wunderbyte_table
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.increaseCounter=function(){let max=arguments.length>0&&void 0!==arguments[0]&&arguments[0];max&&(counter=0);if(++counter>=0){document.querySelectorAll(SELECTORS_SUPPORTMESSAGEBUTTON).forEach((tab=>{tab.classList.remove("hidden")}))}},_exports.init=function(){!async function(){let button=document.querySelector("[data-id='wb-faq-navbar-open-modal']");if(!button)return;if(button.initialized)return;button.initialized=!0,button.addEventListener("click",(async()=>{_ajax.default.call([{methodname:"local_wb_faq_get_faq_data",args:{},done:async function(faqdata){button.dataset.supportthankyou.length>0&&(faqdata.thankyou=button.dataset.supportthankyou);const data=await async function(faqdata){const loadstrings=[{key:"searchfaqs",component:"local_wb_faq"}];let data={tabs:[{name:(await(0,_str.get_strings)(loadstrings))[0],id:"one",active:!0,success:!0}],body:{thankyou:faqdata.thankyou??!1}};return data.json=JSON.parse(faqdata.json),data.root=faqdata.root,data.uid=faqdata.uid,data.canedit=!1,data.allowedit=!1,data}(faqdata);modal?modal.show():async function(data){(modal=await _modal_factory.default.create({type:_custommodal.default.TYPE,large:!0,body:_templates.default.render("local_wb_faq/navbar/body",data),footer:""}).then((modal=>(modal.setRemoveOnClose(!1),modal))).catch((e=>{console.error(e)}))).show()}(data)},fail:function(ex){console.log(ex)}}])}))}()},_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_custommodal=_interopRequireDefault(_custommodal),_modal_factory=_interopRequireDefault(_modal_factory);var modal=null,counter=0,SELECTORS_SUPPORTMESSAGEBUTTON='[data-id="supportmessage-form"]'}));

//# sourceMappingURL=faqnavbar.min.js.map