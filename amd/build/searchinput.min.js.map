{"version":3,"file":"searchinput.min.js","sources":["../src/searchinput.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Templates from 'core/templates';\n\nexport const searchInput = (listContainer, elementToHide, elementToSearch) => {\n    let input, filter, li, a, i, txtValue;\n    input = document.querySelector(listContainer);\n    filter = input.value.toUpperCase();\n    li = document.querySelectorAll(elementToHide);\n    for (i = 0; i < li.length; i++) {\n        a = li[i].querySelector(elementToSearch);\n        txtValue = a.textContent || a.innerText;\n        console.log(txtValue);\n        if (txtValue.toUpperCase().indexOf(filter) > -1) {\n            li[i].style.display = \"\";\n        } else {\n            li[i].style.display = \"none\";\n        }\n    }\n};\n\nexport const searchJSON = (listContainer, json) => {\n    let arr = [];\n    // Select Container\n    let container = document.getElementById('wb_faq_searchbox');\n    // Empty Container\n    container.innerHTML = \"\";\n    let searchVal = document.querySelector(listContainer).value.toUpperCase();\n    if (searchVal.length > 3) {\n        let i = 0;\n        Object.values(json).forEach(e=>{\n             if((e.content && e.content.toUpperCase().indexOf(searchVal) > -1) || (e.title && e.title.toUpperCase().indexOf(searchVal) > -1)) {\n                arr[i] = e;\n                if (e.type == 0) {\n                    arr[i].iscategory = true;\n                }\n                i++;\n            }\n        });\n        render(arr, container);\n    }\n};\n\nexport const init = (searchInputID, listContainer, elementToHide, elementToSearch, json = null) => {\n    /*document.getElementById(searchInputID).addEventListener('keyup', function () {\n        searchInput(listContainer, elementToHide, elementToSearch);\n    }); */\n    document.getElementById(searchInputID).addEventListener('keyup', function () {\n        searchJSON(listContainer, json);\n    });\n};\n\n\nexport const render = (data, container) => {\n    // Render\n    Templates.renderForPromise('local_wb_faq/searchbox', data).then(({html}) => {\n        container.innerHTML = \"\";\n        container.insertAdjacentHTML('afterbegin', html);\n    });\n}"],"names":["listContainer","elementToHide","elementToSearch","input","filter","li","a","i","txtValue","document","querySelector","value","toUpperCase","querySelectorAll","length","textContent","innerText","console","log","indexOf","style","display","searchJSON","json","arr","container","getElementById","innerHTML","searchVal","Object","values","forEach","e","content","title","type","iscategory","render","searchInputID","addEventListener","data","renderForPromise","then","_ref","html","insertAdjacentHTML"],"mappings":";;;;;8NAuB2B,CAACA,cAAeC,cAAeC,uBAClDC,MAAOC,OAAQC,GAAIC,EAAGC,EAAGC,aAC7BL,MAAQM,SAASC,cAAcV,eAC/BI,OAASD,MAAMQ,MAAMC,cACrBP,GAAKI,SAASI,iBAAiBZ,eAC1BM,EAAI,EAAGA,EAAIF,GAAGS,OAAQP,IACvBD,EAAID,GAAGE,GAAGG,cAAcR,iBACxBM,SAAWF,EAAES,aAAeT,EAAEU,UAC9BC,QAAQC,IAAIV,UACRA,SAASI,cAAcO,QAAQf,SAAW,EAC1CC,GAAGE,GAAGa,MAAMC,QAAU,GAEtBhB,GAAGE,GAAGa,MAAMC,QAAU,cAKrBC,WAAa,CAACtB,cAAeuB,YAClCC,IAAM,GAENC,UAAYhB,SAASiB,eAAe,oBAExCD,UAAUE,UAAY,OAClBC,UAAYnB,SAASC,cAAcV,eAAeW,MAAMC,iBACxDgB,UAAUd,OAAS,EAAG,KAClBP,EAAI,EACRsB,OAAOC,OAAOP,MAAMQ,SAAQC,KACnBA,EAAEC,SAAWD,EAAEC,QAAQrB,cAAcO,QAAQS,YAAc,GAAOI,EAAEE,OAASF,EAAEE,MAAMtB,cAAcO,QAAQS,YAAc,KAC1HJ,IAAIjB,GAAKyB,EACK,GAAVA,EAAEG,OACFX,IAAIjB,GAAG6B,YAAa,GAExB7B,QAGR8B,OAAOb,IAAKC,0DAIA,SAACa,cAAetC,cAAeC,cAAeC,qBAAiBqB,4DAAO,KAItFd,SAASiB,eAAeY,eAAeC,iBAAiB,SAAS,WAC7DjB,WAAWtB,cAAeuB,gBAKrBc,OAAS,CAACG,KAAMf,gCAEfgB,iBAAiB,yBAA0BD,MAAME,MAAKC,WAACC,KAACA,WAC9DnB,UAAUE,UAAY,GACtBF,UAAUoB,mBAAmB,aAAcD"}