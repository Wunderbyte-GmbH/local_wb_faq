{"version":3,"file":"filter.min.js","sources":["../src/filter.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Templates from \"core/templates\";\n\nvar allPlayers = Array.from(document.querySelectorAll(\".list-group-item\"));\nvar checked = {};\nvar categories = [];\n/**\n * Gets called from mustache template.\n *\n */\nexport const init = (data, filtercontainer, singledatacontainer) => {\n  var allCheckboxes = document.querySelectorAll(\"input[type=checkbox]\");\n\n  document.querySelectorAll(\".form-group\").forEach(function (e) {\n    categories.push(e.getAttribute(\"name\"));\n    getChecked(e.getAttribute(\"name\"));\n  });\n\n  Array.prototype.forEach.call(allCheckboxes, function (el) {\n    el.addEventListener(\"change\", toggleCheckbox);\n  });\n};\n\n/**\n * Renders template from jsonobject for the categoryid\n * @param {*} data\n */\nexport const render = (data) => {\n  // Load the specific category data\n  let json = data[\"category\"];\n  // Select Container\n  let container = document.getElementById(\"searchContainer\");\n  // Empty Container\n  container.innerHTML = \"asd\";\n  // Render\n  Templates.renderForPromise(\"local_wb_faq/filter\", json)\n    .then(({ html }) => {\n      container.insertAdjacentHTML(\"afterbegin\", html);\n      return;\n    }).catch((e) => {\n        /* eslint-disable no-console */\n        console.log(e);\n    });\n};\n\n/**\n * Eventhandler\n *\n * @param {*} e - event\n */\nexport const toggleCheckbox = (e) => {\n  getChecked(e.target.name);\n  setVisibility();\n};\n\n/**\n * Check which Checkboxes are selected inside a group.\n *\n * @param {*} name of Element group\n */\nexport const getChecked = (name) => {\n  checked[name] = Array.from(\n    document.querySelectorAll(\"input[name=\" + name + \"]:checked\")\n  ).map(function (el) {\n    return el.value;\n  });\n};\n\n/**\n * Compares checked boxes with classes of Elements and shows or hides them.\n */\nexport const setVisibility = () => {\n  console.log(categories);\n  allPlayers.forEach(function (el) {\n    let display = true;\n    categories.forEach(function (c) {\n      /* eslint-disable no-console */\n      console.log(el.classList);\n      let intersection = checked[c].length\n        ? Array.from(Object.values(el.dataset)).filter((x) => checked[c].includes(x)).length\n        : true;\n      if (!intersection) {\n        display = false;\n        return;\n      }\n    });\n    if (display) {\n      el.style.display = \"block\";\n    } else {\n      el.style.display = \"none\";\n    }\n  });\n};\n"],"names":["allPlayers","Array","from","document","querySelectorAll","checked","categories","data","filtercontainer","singledatacontainer","allCheckboxes","forEach","e","push","getAttribute","getChecked","prototype","call","el","addEventListener","toggleCheckbox","json","container","getElementById","innerHTML","renderForPromise","then","_ref","html","insertAdjacentHTML","catch","console","log","target","name","setVisibility","map","value","display","c","classList","length","Object","values","dataset","filter","x","includes","style"],"mappings":";;;;;uOAuBIA,WAAaC,MAAMC,KAAKC,SAASC,iBAAiB,qBAClDC,QAAU,GACVC,WAAa,iBAKG,CAACC,KAAMC,gBAAiBC,2BACtCC,cAAgBP,SAASC,iBAAiB,wBAE9CD,SAASC,iBAAiB,eAAeO,SAAQ,SAAUC,GACzDN,WAAWO,KAAKD,EAAEE,aAAa,SAC/BC,WAAWH,EAAEE,aAAa,YAG5Bb,MAAMe,UAAUL,QAAQM,KAAKP,eAAe,SAAUQ,IACpDA,GAAGC,iBAAiB,SAAUC,oCAQXb,WAEjBc,KAAOd,KAAI,SAEXe,UAAYnB,SAASoB,eAAe,mBAExCD,UAAUE,UAAY,yBAEZC,iBAAiB,sBAAuBJ,MAC/CK,MAAKC,WAACC,KAAEA,WACPN,UAAUO,mBAAmB,aAAcD,SAE1CE,OAAOlB,IAENmB,QAAQC,IAAIpB,aASPQ,eAAkBR,IAC7BG,WAAWH,EAAEqB,OAAOC,MACpBC,8DAQWpB,WAAcmB,OACzB7B,QAAQ6B,MAAQjC,MAAMC,KACpBC,SAASC,iBAAiB,cAAgB8B,KAAO,cACjDE,KAAI,SAAUlB,WACPA,GAAGmB,+CAODF,cAAgB,KAC3BJ,QAAQC,IAAI1B,YACZN,WAAWW,SAAQ,SAAUO,QACvBoB,SAAU,EACdhC,WAAWK,SAAQ,SAAU4B,GAE3BR,QAAQC,IAAId,GAAGsB,YACInC,QAAQkC,GAAGE,QAC1BxC,MAAMC,KAAKwC,OAAOC,OAAOzB,GAAG0B,UAAUC,QAAQC,GAAMzC,QAAQkC,GAAGQ,SAASD,KAAIL,SAG9EH,SAAU,MAKZpB,GAAG8B,MAAMV,QADPA,QACiB,QAEA"}